(function(i,f){"use strict";var k={exports:{}},l={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h=i,y=Symbol.for("react.element"),p=Symbol.for("react.fragment"),T=Object.prototype.hasOwnProperty,E=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function g(c,e,u){var s,n={},a=null,d=null;u!==void 0&&(a=""+u),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(d=e.ref);for(s in e)T.call(e,s)&&!_.hasOwnProperty(s)&&(n[s]=e[s]);if(c&&c.defaultProps)for(s in e=c.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:y,type:c,key:a,ref:d,props:n,_owner:E.current}}l.Fragment=p,l.jsx=g,l.jsxs=g,k.exports=l;var r=k.exports;const b=()=>{const[c,e]=i.useState("Waiting for tasks..."),[u,s]=i.useState(null),[n,a]=i.useState(null);i.useEffect(()=>{const t=window.webex;if(!t){e("Webex SDK not available in Desktop Agent");return}return s(t),t.cc.on("task:incoming",d),t.cc.on("task:hydrate",m),t.cc.on("task:assigned",x),()=>{t.cc.off("task:incoming",d),t.cc.off("task:hydrate",m),t.cc.off("task:assigned",x)}},[]);const d=async t=>{console.log("Incoming task:",t),a(t),e(`Incoming task: ${t.data.interactionId}`);try{await t.accept(),e(`Task accepted: ${t.data.interactionId}`)}catch(o){const C=o instanceof Error?o.message:JSON.stringify(o);e(`Error accepting task: ${C}`)}},m=t=>{console.log("task:hydrate",t),e(`Hydrated task: ${t.data.interactionId}`),a(t)},x=t=>{console.info("Task assigned:",t.data.interactionId),e(`Task assigned: ${t.data.interactionId}`),a(t)},w=async()=>{if(n)try{await n.end(),e(`Task ended: ${n.data.interactionId}`),a(null)}catch(t){const o=t instanceof Error?t.message:JSON.stringify(t);e(`Error ending task: ${o}`)}},I=async()=>{if(n)try{await n.decline(),e(`Task declined: ${n.data.interactionId}`),a(null)}catch(t){const o=t instanceof Error?t.message:JSON.stringify(t);e(`Error declining task: ${o}`)}};return r.jsxs("div",{children:[r.jsx("h2",{children:"WxCC Task Agent"}),r.jsxs("p",{children:["Status: ",c]}),r.jsx("button",{onClick:w,disabled:!n,children:"End Task"}),r.jsx("button",{onClick:I,disabled:!n,children:"Decline Task"})]})};class S extends HTMLElement{connectedCallback(){const e=document.createElement("div");this.appendChild(e),f.render(r.jsx(i.StrictMode,{children:r.jsx(b,{})}),e)}disconnectedCallback(){this.firstChild&&f.unmountComponentAtNode(this.firstChild)}}customElements.get("wxcc-taskagentauto")||customElements.define("wxcc-taskagentauto",S)})(React,ReactDOM);
